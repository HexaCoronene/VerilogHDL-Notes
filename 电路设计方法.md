# 设计思想和可综合特性

**将硬件设计语言与C语言区分开**

正确的模256计数器
```verilog
module conuter(count, clk, reset);
output count;
input clk, reset;
reg [7:0] count;
reg out;
always @(posedge clk)
	if(!reset) count <= 0;
	else if(count == 8b'11111111) count <= 0;
	else count <= count + 1;
endmodule
```

多路选择器的描述方式：
1. 真值表
2. 逻辑表达式
3. 基本逻辑单元的结构型描述

---

# 组合电路设计

组合电路的设计考虑以下几点：
1. 所用的逻辑器件数目最少，器件的种类最少，且器件间的连线最简单。这样的电路称为“最小化电路”
2. 其次，为了满足速度要求，应使级数尽量少，以减少门电路的延迟，电路的功耗尽可能小，工作时稳定可靠

描述组合逻辑电路有四种方法：结构描述、逻辑代数、真值表、抽象描述

不同的描述方式跟设计者的水平相关

## 数字加法器

加法和乘法可以直接使用，注意控制结果的位宽

### 1位全加器
1. 利用连续赋值语句实现

```verilog
module one_bit_fulladder(sum, c_out, a, b, c_in)
	input a, b, c_in;
	output sum, c_out;
	assign sum = (a ^ b) ^ c_in;
	assign c_out = (a & b) | ((a ^ b) & c_in);
endmodule
```

2. 利用行为描述方式实现

```verilog
module one_bit_fulladder(sum, c_out, a, b, c_in)
	input a, b, c_in;
	output sum, c_out;
	assign {c_out, sum} = a + b + c_in;
endmodule
```

### 异步进位加法器

```verilog
// 8 bit
module eight_bit_fulladder(sum, c_out, a, b, c_in)
	output [7:0] sum;
	output c_out;
	input [7:0] a, b; 
	input c_in;
	assign {c_out, sum} = a + b + c_in;
endmodule
```

### 超前进位加法器

```verilog
//4 bit
module four_bits_fast_adder(sum_out, c_out, a, b, c_in)
	input [3:0] a, b;
	input c_in;
	output [3:0] sum_out;
	output c_out;
	wire [4:0] g, p, c;
	assign c[0] = c_in;
	assign p = a | b;
	assign g = a & b;
	assign c[1] = g[0] | (p[0] & c[0]);
	assign c[2] = g[1] | (p[1] & (g[0] | (p[0] & c[0])));
	assign c[3] = g[2] | (p[2] & (g[1] | (p[1] & (g[0] | (p[0] & c[0])))));
	assign c[4] = g[3] | (p[3] & (g[2] | (p[2] & (g[1] | (p[1] & (g[0] | (p[0] & c[0])))))));
	assign sum_out = p ^ c[3:0];
	assign c_out = c[4];
```

## 数据比较器

## 数据选择器

1. 真值表形式

```verilog
module MUX(out, data, sel);
	output out;
	input [3:0] data;
	input [1:0] sel;
	reg out;
	always @(data or sel)
		case (sel)
			2'b00: out <= data[0];
			2'b01: out <= data[1];
			2'b10: out <= data[2];
			2'b11: out <= data[3];
		endcase
	endmodule
```

2. 逻辑表达式形式

```verilog
module MUX(out, data, sel);
	output out;
	input [3:0] data;
	input [1:0] sel;
	wire w1, w2, w3, w4;
	assign w1 = (~sel[1]) & (~sel[0]) & data[0];
	assign w2 = (~sel[1]) & sel[0] & data[1];
	assign w3 = sel[1] & (~sel[0]) & data[2];
	assign w4 = sel[1] & sel[0] & data[3];
endmodule
```

3. 结构性描述

```verilog
module MUX(out, data, sel);
    output out;
	input [3:0] data;
	input [1:0] sel;
	wire w1, w2, w3, w4, w5, w6;
	not U1(w1, sel[1]), U2(w2, sel[0]);
	and U3(w3, w1, w2, data[0]), U4(w4, w1, sel[0], data[1]), U5(w5, sel[1], w2, data[2]), U6(w6, sel[1], sel[0], data[3]);
	or U7(out, w3, w4, w5, w6);
endmodule
```
	
`if-else`语句和`?`操作符实际上就是数据选择器
